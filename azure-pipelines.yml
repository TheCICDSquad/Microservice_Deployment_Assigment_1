trigger:
  - main  # or your branch name

pool:
  name: Linux_Agent  # Your self-hosted agent name

variables:
  DOCKER_IMAGE_NAME: fastapi-app
  DOCKER_TAG: latest
  DOCKER_REGISTRY: sashangykumar456  # Docker Hub username

steps:
  - checkout: self

  - script: |
      echo "‚úÖ Listing files to debug"
      ls -al
      echo "---"
      ls -al app
    displayName: 'Debug File Listing'

  - script: |
      echo "üê≥ Building Docker image using app/DockerFile"
      docker build -f app/DockerFile -t $(DOCKER_REGISTRY)/$(DOCKER_IMAGE_NAME):$(DOCKER_TAG) app
    displayName: 'Build Docker Image'
