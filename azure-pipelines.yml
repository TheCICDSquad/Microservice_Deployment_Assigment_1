trigger:
  - main

pool:
  name: Linux_Agent

variables:
  imageName: https://hub.docker.com/repository/docker/sashangykumar456/python
  tag: latest

steps:
  - script: |
      echo "Showing repo structure:"
      ls -la
    displayName: "Debug Repo Structure"

  - script: |
      echo $(DOCKER_PASSWORD) | docker login -u $(DOCKER_USERNAME) --password-stdin
    displayName: "Docker Login"

  - script: |
      docker build -t $(imageName):$(tag) .
    displayName: "Build Docker Image"

  - script: |
      docker push $(imageName):$(tag)
    displayName: "Push Docker Image"
